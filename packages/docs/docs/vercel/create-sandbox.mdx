---
image: /generated/articles-docs-vercel-create-sandbox.png
title: createSandbox()
crumb: '@remotion/vercel'
---

# createSandbox()<AvailableFrom v="4.0.426" />

Creates a new [Vercel Sandbox](https://vercel.com/docs/vercel-sandbox) with all Remotion dependencies installed, including system libraries, the compositor, and a browser.  
After creating the sandbox, call [`addBundleToSandbox()`](/docs/vercel/add-bundle-to-sandbox) to copy your Remotion bundle into it.

## Example

```ts twoslash title="create-snapshot.ts"
// @module: es2022
// @target: es2022
import {addBundleToSandbox, createSandbox} from '@remotion/vercel';
import type {CreateSandboxOnProgress} from '@remotion/vercel';
// ---cut---
const sandbox = await createSandbox({
  onProgress: ({progress, message}) => {
    console.log(`${message} (${Math.round(progress * 100)}%)`);
  },
});

await addBundleToSandbox({
  sandbox,
  bundleDir: '.remotion',
});

// ... use the sandbox

await sandbox.stop();
```

## Arguments

An object with the following properties:

### `onProgress?`

A callback that receives progress updates during sandbox creation.

```ts twoslash
import type {CreateSandboxOnProgress} from '@remotion/vercel';
// ---cut---
const onProgress: CreateSandboxOnProgress = ({progress, message}) => {
  console.log(`${message} (${Math.round(progress * 100)}%)`);
};
```

## Return value

A [`VercelSandbox`](/docs/vercel/vercel-types#vercelsandbox) object (a [`Sandbox`](https://vercel.com/docs/vercel-sandbox/sdk-reference#sandbox-class) with `AsyncDisposable` support).

## Stopping the sandbox

When you are done with the sandbox, you need to stop it to free resources. There are two ways to do this:

### Using `sandbox.stop()`

Manually call `sandbox.stop()` when you are done:

```ts twoslash title="manual-cleanup.ts"
// @module: es2022
// @target: es2022
import {createSandbox} from '@remotion/vercel';
// ---cut---
const sandbox = await createSandbox();

// ... use the sandbox

await sandbox.stop();
```

### Using `await using`

Use `await using` to automatically stop the sandbox when it goes out of scope:

```ts twoslash title="auto-cleanup.ts"
// @module: es2022
// @target: es2022
import {createSandbox} from '@remotion/vercel';
// ---cut---
await using sandbox = await createSandbox();

// ... use the sandbox
// sandbox.stop() is called automatically
```

## See also

- [`addBundleToSandbox()`](/docs/vercel/add-bundle-to-sandbox)
- [`restoreSnapshot()`](/docs/vercel/restore-snapshot)
- [`saveSnapshot()`](/docs/vercel/save-snapshot)
- [Source code for this function](https://github.com/remotion-dev/remotion/blob/main/packages/vercel/src/create-sandbox.ts)
