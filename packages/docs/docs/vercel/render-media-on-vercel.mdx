---
image: /generated/articles-docs-vercel-render-media-on-vercel.png
title: renderMediaOnVercel()
crumb: '@remotion/vercel'
---

# renderMediaOnVercel()<AvailableFrom v="4.0.426" />

Renders a video inside a Vercel Sandbox.

The rendered file stays inside the sandbox. Use [`uploadToVercelBlob()`](/docs/vercel/upload-to-vercel-blob) to upload it to Vercel Blob.

## Example

```ts twoslash title="route.ts"
// @module: es2022
// @target: es2022
import {renderMediaOnVercel, addBundleToSandbox, createSandbox} from '@remotion/vercel';
const sandbox = await createSandbox();
// ---cut---
const {file} = await renderMediaOnVercel({
  sandbox,
  compositionId: 'MyComp',
  inputProps: {title: 'Hello World'},
  onProgress: (update) => {
    if (update.type === 'render-progress') {
      console.log(`Rendering: ${Math.round(update.progress * 100)}%`);
    }
  },
});
```

## Arguments

An object with the following properties:

### `sandbox`

A [`Sandbox`](https://vercel.com/docs/vercel-sandbox/sdk-reference#sandbox-class) instance.

### `compositionId`

The ID of the Remotion composition to render.

### `inputProps`

Props to pass to the composition.

### `codec?`

_"h264" | "h265" | "vp8" | "vp9" | "mp3" | "aac" | "wav" | "prores" | "h264-mkv" | "gif"_

Choose a suitable codec for your output media. Refer to the [Encoding guide](/docs/encoding) to find the best codec for your use case. Default: `"h264"`.

### `outputFile?`

The output file path inside the sandbox. Default: `"/tmp/video.mp4"`.

### `crf?`

_number | null_

The constant rate factor, controlling the quality. See: [Controlling quality using the CRF setting.](/docs/encoding/#controlling-quality-using-the-crf-setting)

### `imageFormat?`

_"jpeg" | "png" | "none"_

In which image format the frames should be rendered.

- `jpeg` is the default and is fastest
- `png` if you want to [render transparent videos](/docs/transparent-videos/)
- `none` if you are rendering audio

### `pixelFormat?`

_string_

[A custom pixel format to use.](/docs/transparent-videos/) Usually used for special use cases like transparent videos.

### `envVariables?`

`Record<string, string>`

An object containing environment variables to be injected in your project.

See: [Environment variables](/docs/env-variables/)

### `frameRange?`

_number | [number, number] | [number, null]_

Specify a single frame (passing a `number`) or a range of frames (passing a tuple `[number, number]`) to be rendered. By passing `null` (default) all frames of a composition get rendered.

### `everyNthFrame?`

Renders only every nth frame. For example only every second frame, every third frame and so on. Only works for rendering GIFs. [See here for more details.](/docs/render-as-gif) Default: `1`.

### `overwrite?`

_boolean_

If set to false, the output file will not be written if a file already exists. Default: `true`.

### `proResProfile?`

_string_

Sets a ProRes profile. Only applies to videos rendered with `prores` codec. See [Encoding guide](/docs/encoding/#controlling-quality-using-prores-profile) for possible options.

### `chromiumOptions?`

Allows you to set certain Chromium / Google Chrome flags. See: [Chromium flags](/docs/chromium-flags).

### `scale?`

<Options id="scale" />

### `browserExecutable?`

A string defining the absolute path on disk of the browser executable that should be used. By default Remotion will try to detect it automatically and download one if none is available.

### `preferLossless?`

Prefer lossless audio encoding when possible. Default: `false`.

### `enforceAudioTrack?`

_boolean_

Render a silent audio track if there wouldn't be any otherwise. Default: `false`.

### `disallowParallelEncoding?`

Disallows the renderer from doing rendering frames and encoding at the same time. This makes the rendering process more memory-efficient, but possibly slower. Default: `false`.

### `concurrency?`

A `number` specifying how many render processes should be started in parallel, a `string` specifying the percentage of the CPU threads to use, or `null` to let Remotion decide based on the CPU of the host machine. Default: `null`.

### `metadata?`

<Options id="metadata" />

### `logLevel?`

<Options id="log" />

### `timeoutInMilliseconds?`

A number describing how long the render may take to resolve all [`delayRender()`](/docs/delay-render) calls [before it times out](/docs/timeout). Default: `30000`.

### `videoBitrate?`

<Options id="video-bitrate" />

### `audioBitrate?`

<Options id="audio-bitrate" />

### `audioCodec?`

_"pcm-16" | "aac" | "mp3" | "opus"_

Choose the encoding of your audio.

- The default is dependent on the chosen `codec`.
- Choose `pcm-16` if you need uncompressed audio.
- Not all video containers support all audio codecs.
- This option takes precedence if the `codec` option also specifies an audio codec.

Refer to the [Encoding guide](/docs/encoding/#audio-codec) to see defaults and supported combinations.

### `encodingMaxRate?`

<Options id="max-rate" />

### `encodingBufferSize?`

<Options id="buffer-size" />

### `muted?`

_boolean_

If set to true, no audio is being rendered. Default: `false`.

### `numberOfGifLoops?`

<Options id="number-of-gif-loops" />

### `x264Preset?`

<Options id="x264-preset" />

### `colorSpace?`

<Options id="color-space" />

### `jpegQuality?`

_number_

Sets the quality of the generated JPEG images. Must be an integer between 0 and 100. Default is `80`.

Only applies if `imageFormat` is `'jpeg'`, otherwise this option is invalid.

### `forSeamlessAacConcatenation?`

<Options id="for-seamless-aac-concatenation" />

### `separateAudioTo?`

<Options cli id="separate-audio-to" />

### `hardwareAcceleration?`

<Options id="hardware-acceleration" />

### `chromeMode?`

<Options id="chrome-mode" />

### `offthreadVideoCacheSizeInBytes?`

<Options id="offthreadvideo-cache-size-in-bytes" />

### `mediaCacheSizeInBytes?`

<Options id="media-cache-size-in-bytes" />

### `offthreadVideoThreads?`

<Options id="offthreadvideo-video-threads" />

### `repro?`

<Options id="repro" />

### `binariesDirectory?`

<Options id="binaries-directory" />

### `licenseKey?`

<Options id="license-key" />

### `onProgress?`

A callback that receives [`RenderOnVercelProgress`](/docs/vercel/types#renderonvercelprogress) updates.

```ts twoslash
import type {RenderOnVercelProgress} from '@remotion/vercel';
// ---cut---
const onProgress = (update: RenderOnVercelProgress) => {
  if (update.type === 'render-progress') {
    console.log(`Rendering: ${Math.round(update.progress * 100)}%`);
  }
};
```

## Return value

An object containing:

### `file`

The path to the rendered video inside the sandbox.

## See also

- [`renderStillOnVercel()`](/docs/vercel/render-still-on-vercel)
- [`uploadToVercelBlob()`](/docs/vercel/upload-to-vercel-blob)
- [Source code for this function](https://github.com/remotion-dev/remotion/blob/main/packages/vercel/src/render-media-on-vercel.ts)
