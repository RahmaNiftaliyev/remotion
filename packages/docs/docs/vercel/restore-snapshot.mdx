---
image: /generated/articles-docs-vercel-restore-snapshot.png
title: restoreSnapshot()
crumb: '@remotion/vercel'
---

# restoreSnapshot()<AvailableFrom v="4.0.426" />

Restores a sandbox from a cached snapshot. Reads the snapshot ID from Vercel Blob storage (keyed by `VERCEL_DEPLOYMENT_ID`) and creates a sandbox from it.

This is the production counterpart to [`createSandbox()`](/docs/vercel/create-sandbox). Use `createSandbox()` during development and `restoreSnapshot()` in production.

## Example

```ts twoslash title="route.ts"
// @module: es2022
// @target: es2022
import {addBundleToSandbox, createSandbox, restoreSnapshot} from '@remotion/vercel';
// ---cut---
const sandbox = process.env.VERCEL
  ? await restoreSnapshot()
  : await createSandbox();

if (!process.env.VERCEL) {
  await addBundleToSandbox({sandbox, bundleDir: '/path/to/bundle'});
}

// ... use the sandbox

await sandbox.stop();
```

## Arguments

None.

## Return value

A [`VercelSandbox`](/docs/vercel/types#vercelsandbox) object restored from the cached snapshot. Throws if no snapshot is found.

## Using `await using`

You can use `await using` to automatically clean up the sandbox when it goes out of scope:

```ts twoslash title="route.ts"
// @module: es2022
// @target: es2022
import {addBundleToSandbox, createSandbox, restoreSnapshot} from '@remotion/vercel';
// ---cut---
await using sandbox = process.env.VERCEL
  ? await restoreSnapshot()
  : await createSandbox();

if (!process.env.VERCEL) {
  await addBundleToSandbox({sandbox, bundleDir: '/path/to/bundle'});
}
```

## See also

- [`createSandbox()`](/docs/vercel/create-sandbox)
- [`saveSnapshot()`](/docs/vercel/save-snapshot)
- [Source code for this function](https://github.com/remotion-dev/remotion/blob/main/packages/vercel/src/restore-snapshot.ts)
